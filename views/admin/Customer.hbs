<section class="AdminPage">
    <aside class="ADSidebar">
        <div class="ADSidebarLogoDiv">
            <img class="AdLogo" src="/images/Logo/MegaPaintsLogo.png" alt="">
        </div>
        <div class="ADSelectioSideBarDIv">
            <a href="/admin">
                <div class="Category ">
                    <p class="ADDelectionSideBarLabel">Category</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Sub-Category">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Sub-Category</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Product">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Product</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Additives">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Additives</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Binders">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Binders</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
             <a href="/admin/Branches">
                <div class="Category ">
                    <p class="ADDelectionSideBarLabel">Branches</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
             <a href="/admin/Users">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Users</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            {{!-- <a href="/admin/Employees">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Employees</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Customers">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Customers</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a> --}}

            <div class="ADAccount">
                <p class="ADDelectionSideBarLabel">Account</p>
                <img src="/images/Icons/MoreSelect.png" alt="" class="ADAccountIcon">
            </div>

            <div class="ADAccountExpandDiv">
                <a href="/admin/change-password">
                    <div class="ADlogoutDiv">
                        <p>Change Password</p>
                        {{!-- <img src="/images/Icons/logout.png" alt="" class="ADLogoutIcon"> --}}
                    </div>
                </a>
                <a href="/admin/logout">
                    <div class="ADlogoutDiv">
                        <p>Logout</p>
                        <img src="/images/Icons/logout.png" alt="" class="ADLogoutIcon">
                    </div>
                </a>
            </div>

        </div>
    </aside>
    <section class="AdMainArea">
        <div class="ADMainAreaDiv">
            <div class="ADMainAreaHeaderDiv">
                <p class="ADMainAreaHeader">Customers</p>
            </div>
            <div class="ADMainAddButtonDiv">
                <div onclick="OpenCategoryAddingForm()" class="ADMainAddButton">
                    <p>Add New</p>
                    <img src="/images/Icons/add.png" alt="" class="ADAddNewIcon">
                </div>
            </div>
            <div class="ADCustomerCatDiv">
                <div class="ADCustomerCatHeader">
                    <p class="ADCustomerCatHead">Customer Category</p>
                    <button id="ADAddCusCategoryBTN" class="ADAddCusCategoryBTN">Add New Customer Category</button>
                    <img class="AdCustomerMoreIcon" onclick="toggleCategoryList()" src="/images/Icons/MoreSelect.png"
                        id="rotateIcon" alt="">
                </div>
                <div class="CategoryList" id="categoryList">
                    <hr>
                  
                     {{#each CustomerCategory}}
                    <div class="ADCustomerCategoryRow">
                        <p class="ADCustomerCategory">{{this.Category}}</p>
                        <a href="/admin/removecustomerCategory/{{this.Category}}" class="btn ADCusotmerdelete-button"
                            onclick="return confirm('Are you sure you want to delete this Customer category?')"><i
                                class="fas fa-trash"></i> Delete</a>
                    </div>

                    {{/each}}  
                </div>
            </div>

            {{!-- Pop up for add Category of customers --}}
            <div id="ADCUSpopup">
                <div class="ADCUSpopup">
                    <form method="post" action="/admin/AddCustomerCategory">
                        <div class="ADCusPopHeader">
                            <p class="ADCUSpopup-header">Add Customer Category</p>
                            <button type="button" class="closeBtn" onclick="closePopup()">X</button>
                        </div>
                        <input type="text" name="Category" id="categoryInput" placeholder="Enter category name">
                        <button type="submit" id="submitBtn">Submit</button>
                    </form>
                </div>
            </div>



            <div class="ADMainTableDiv">
                <table class="ADMainTable  table table-bordered text-center ADcustom-border">
                    <thead class="ADTableHead">
                        <tr class="ADTableHeadTR">
                            <th>ID</th>
                            <th>Customer</th>
                            <th>Mobile</th>
                            <th>Email</th>
                            <th>Password</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each customers}}
                        <tr>
                            <td>{{this.Customer_Id}}</td>
                            <td>{{this.Customer_Name}}</td>
                            <td>{{this.MOB_Number}}</td>
                            <td>{{this.Email}}</td>
                            <td>{{this.Password}}</td>
                            <td><a href="/admin/editCustomer/{{this.Customer_Id}}" class="btn btn-primary">Edit</a></td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>


        {{!-- Addcategory form --}}

        <div id="ADpopupContainer">
            <div id="ADpopupContentEmployeeCustomer">
                <!-- Add your popup content here -->
                <div class="ADAddCategoryFromHeaderDiv">
                    <p class="ADAddCategoryFromHeader">Add Customer</p>
                    <div onclick="closeCategoryAddingForm()" class="ADAddCategoryFromCloseBTNDiv">
                        <img src="/images/Icons/delete-button.png" alt="" class="ADaddCloseBTNIcon">
                    </div>
                </div>
                <form action="/admin/AddCustomer" method="post">
                    <div class="ADAddCategoryFromDiv">
                        <p class="ADAddCategoryLabel">Customer Name:</p>
                        <input required class="ADAddCategoryTextInput ADemployeeAddforminput" type="text"
                            name="Customer_Name" placeholder="Enter the Name Customer Name">

                        <p class="ADAddCategoryLabel">Mobile Number</p>
                        <input required class="ADAddCategoryTextInput ADemployeeAddforminput" type="number"
                            name="MOB_Number" placeholder="Enter Mobile Number">
                        <p class="ADAddCategoryLabel">Email</p>
                        <input required class="ADAddCategoryTextInput ADemployeeAddforminput" type="email" name="Email"
                            placeholder="Enter Email">
                        <p class="ADAddCategoryLabel">Customer Category</p>
                        <select name="CustomerCategory" class="ADAddCategoryTextInput ADemployeeAddforminput" id="">
                            {{#each CustomerCategory}}
                            <option value="{{this.Category}}">{{this.Category}}</option>
                            {{/each}}
                        </select>

                        <p class="ADAddCategoryLabel">Password</p>
                        <input required class="ADAddCategoryTextInput ADemployeeAddforminput ADEmployeePass"
                            type="password" name="Password" id="password" placeholder="Enter Password">
                        <span id="password-icon" class="password-icon" onclick="togglePassword()"><i
                                class="fas fa-eye"></i></span>


                        <button type="submit" class="btn btn-primary ADaddCategorySubmitBTN ">Add Customer</button>
                    </div>
                </form>
            </div>
        </div>
    </section>
</section>

<script>


    var addButton = document.getElementById('ADAddCusCategoryBTN');
    var popup = document.getElementById('ADCUSpopup');
    var categoryInput = document.getElementById('categoryInput');
    var submitBtn = document.getElementById('submitBtn');

    addButton.addEventListener('click', function () {
        popup.style.display = 'flex';
        // Disable scrolling
        document.body.style.overflow = 'hidden';
    });

    submitBtn.addEventListener('click', function () {
        var categoryName = categoryInput.value;
        if (categoryName) {
            // You can perform further actions, such as adding the category to the list.
            //console.log('New category:', categoryName);
            // Close the popup
            popup.style.display = 'none';
        } else {
            alert('Please enter a category name');
        }
    });

    function closePopup() {
        popup.style.display = 'none';
        // Enable scrolling
        document.body.style.overflow = 'auto';

    }



    function toggleCategoryList() {

        var categoryList = document.getElementById('categoryList');
        var icon = document.getElementById('rotateIcon');
        var BTN = document.getElementById('ADAddCusCategoryBTN');

        if (categoryList.style.maxHeight === '0px') {

            categoryList.style.maxHeight = categoryList.scrollHeight + 'px';
            icon.style.transform = 'rotate(-90deg)';
            BTN.style.display = 'block';
        } else {
            closePopup()
            categoryList.style.maxHeight = '0px';
            icon.style.transform = 'rotate(90deg)';
            BTN.style.display = 'none';

        }
    }



</script>