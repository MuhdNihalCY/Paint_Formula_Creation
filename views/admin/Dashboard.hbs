<section class="AdminPage">
    <aside class="ADSidebar">
        <div class="ADSidebarLogoDiv">
            <img class="AdLogo" src="/images/Logo/MegaPaintsLogo.png" alt="">
        </div>
        <div class="ADSelectioSideBarDIv">
            <a href="/admin">
                <div class="Category ADactiveButton">
                    <p class="ADDelectionSideBarLabel">Category</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Sub-Category">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Sub-Category</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Product">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Product</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Additives">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Additives</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Binders">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Binders</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Branches">
                <div class="Category ">
                    <p class="ADDelectionSideBarLabel">Branches</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
            <a href="/admin/Users">
                <div class="Category">
                    <p class="ADDelectionSideBarLabel">Users</p>
                    <img src="/images/Icons/MoreSelect.png" alt="" class="ADMoreIcon">
                </div>
            </a>
           

            <div class="ADAccount">
                <p class="ADDelectionSideBarLabel">Account</p>
                <img src="/images/Icons/MoreSelect.png" alt="" class="ADAccountIcon">
            </div>

            <div class="ADAccountExpandDiv">
                <a href="/admin/change-password">
                    <div class="ADlogoutDiv">
                        <p>Change Password</p>
                        {{!-- <img src="/images/Icons/logout.png" alt="" class="ADLogoutIcon"> --}}
                    </div>
                </a>
                <a href="/admin/logout">
                    <div class="ADlogoutDiv">
                        <p>Logout</p>
                        <img src="/images/Icons/logout.png" alt="" class="ADLogoutIcon">
                    </div>
                </a>
            </div>

        </div>
    </aside>
    <section class="AdMainArea">
        <div class="ADMainAreaDiv">
            <div class="ADMainAreaHeaderDiv">
                <p class="ADMainAreaHeader">Category</p>
            </div>
            <div class="ADMainAddButtonDiv">
                <div class="CategoryDelErrorDiv">
                    <p class="CategoryDelError">{{DelError}}</p>
                </div>
                {{!-- <a href="/admin/addCategory"> --}}
                <div onclick="OpenCategoryAddingForm()" class="ADMainAddButton">
                    <p>Add New</p>
                    <img src="/images/Icons/add.png" alt="" class="ADAddNewIcon">
                </div>
                {{!-- </a> --}}
            </div>
            <div class="ADMainTableDiv">
                <table border="2" class="ADMainTable table table-bordered text-center ADcustom-border">
                    <thead class="ADTableHead">
                        <tr class="ADTableHeadTR">
                            <th>ID</th>
                            <th>Category Name</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each AllCategory}}
                        <tr>
                            <td>{{this.Category_Id}}</td>
                            <td>{{this.Category}}</td>
                            <td><a onclick="return confirmProductDelete()" href="/admin/Detele-Category/{{this._id}}"
                                    class="btn btn-danger">Delete <img class="ADdeleteIcon" src="/images/Icons/bin.png"
                                        alt=""></a></td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>

        {{!-- Addcategory form --}}
        <div id="ADpopupContainer">
            <div id="ADpopupContent">
                <!-- Add your popup content here -->
                <div class="ADAddCategoryFromHeaderDiv">
                    <p class="ADAddCategoryFromHeader">Add Category</p>
                    <div onclick="closeCategoryAddingForm()" class="ADAddCategoryFromCloseBTNDiv">
                        <img src="/images/Icons/delete-button.png" alt="" class="ADaddCloseBTNIcon">
                    </div>
                </div>
                <form action="/admin/AddCategory" method="post">
                    <div class="ADAddCategoryFromDiv">
                        <p class="ADAddCategoryLabel">Category Name:</p>
                        <input required class="ADAddCategoryTextInput" type="text" name="Category"
                            placeholder="Enter the Name of category">
                        <button type="submit" class="btn btn-primary ADaddCategorySubmitBTN ">Add Category</button>
                    </div>
                </form>
            </div>
        </div>
    </section>
</section>

<script>

    // Check if the page is being refreshed
    if (performance.navigation.type === 1 && !sessionStorage.getItem('refreshed')) {
        // Clear the query parameters
        const url = new URL(window.location.href);
        url.search = '';
        window.history.replaceState(null, '', url.toString());

        // Set the 'refreshed' flag in sessionStorage
        sessionStorage.setItem('refreshed', true);

        // Refresh the page
        location.reload();
    } else {
        // Clear the 'refreshed' flag from sessionStorage
        sessionStorage.removeItem('refreshed');
    }



    function confirmProductDelete() {
        return confirm('Are you sure you want to delete this Category?');
    }
</script>